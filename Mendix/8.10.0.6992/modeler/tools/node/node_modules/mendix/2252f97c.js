import{l as lowerCaseFirst,A as AssertionError,h as tuple,e as ensure,j as crash}from"./e81b9882.js";import{n as newId}from"./3cf8690e.js";import{f as fromLoadable}from"./0e7164f2.js";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};var __assign=function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function __values(o){var m="function"==typeof Symbol&&o[Symbol.iterator],i=0;return m?m.call(o):{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}}}function __read(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}function __spread(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar}var EMPTY_ARRAY=[];Object.freeze(EMPTY_ARRAY);var EMPTY_OBJECT={};function getNextId(){return++globalState.mobxGuid}function fail(message){throw invariant(!1,message),"X"}function invariant(check,message){if(!check)throw new Error("[mobx] "+(message||"An invariant failed, however the error is obfuscated because this is a production build."))}function once(func){var invoked=!1;return function(){if(!invoked)return invoked=!0,func.apply(this,arguments)}}Object.freeze(EMPTY_OBJECT);var noop=function(){};function isObject(value){return null!==value&&"object"==typeof value}function isPlainObject(value){if(null===value||"object"!=typeof value)return!1;var proto=Object.getPrototypeOf(value);return proto===Object.prototype||null===proto}function addHiddenProp(object,propName,value){Object.defineProperty(object,propName,{enumerable:!1,writable:!0,configurable:!0,value:value})}function createInstanceofPredicate(name,clazz){var propName="isMobX"+name;return clazz.prototype[propName]=!0,function(x){return isObject(x)&&!0===x[propName]}}function isES6Map(thing){return thing instanceof Map}function isES6Set(thing){return thing instanceof Set}function getPlainObjectKeys(object){var enumerables=new Set;for(var key in object)enumerables.add(key);return Object.getOwnPropertySymbols(object).forEach((function(k){Object.getOwnPropertyDescriptor(object,k).enumerable&&enumerables.add(k)})),Array.from(enumerables)}function stringifyKey(key){return key&&key.toString?key.toString():new String(key).toString()}function toPrimitive(value){return null===value?null:"object"==typeof value?""+value:value}var $mobx=Symbol("mobx administration"),Atom=function(){function Atom(name){void 0===name&&(name="Atom@"+getNextId()),this.name=name,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=new Set,this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=IDerivationState.NOT_TRACKING}return Atom.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach((function(listener){return listener()}))},Atom.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach((function(listener){return listener()}))},Atom.prototype.reportObserved=function(){return reportObserved(this)},Atom.prototype.reportChanged=function(){startBatch(),function(observable){if(observable.lowestObserverState===IDerivationState.STALE)return;observable.lowestObserverState=IDerivationState.STALE,observable.observers.forEach((function(d){d.dependenciesState===IDerivationState.UP_TO_DATE&&(d.isTracing!==TraceMode.NONE&&logTraceInfo(d,observable),d.onBecomeStale()),d.dependenciesState=IDerivationState.STALE}))}(this),endBatch()},Atom.prototype.toString=function(){return this.name},Atom}(),isAtom=createInstanceofPredicate("Atom",Atom);function createAtom(name,onBecomeObservedHandler,onBecomeUnobservedHandler){void 0===onBecomeObservedHandler&&(onBecomeObservedHandler=noop),void 0===onBecomeUnobservedHandler&&(onBecomeUnobservedHandler=noop);var arg3,atom=new Atom(name);return onBecomeObservedHandler!==noop&&interceptHook("onBecomeObserved",atom,onBecomeObservedHandler,arg3),onBecomeUnobservedHandler!==noop&&onBecomeUnobserved(atom,onBecomeUnobservedHandler),atom}var comparer={identity:function(a,b){return a===b},structural:function(a,b){return deepEqual(a,b)},default:function(a,b){return Object.is(a,b)},shallow:function(a,b){return deepEqual(a,b,1)}},mobxDidRunLazyInitializersSymbol=Symbol("mobx did run lazy initializers"),mobxPendingDecorators=Symbol("mobx pending decorators"),enumerableDescriptorCache={},nonEnumerableDescriptorCache={};function createPropertyInitializerDescriptor(prop,enumerable){var cache=enumerable?enumerableDescriptorCache:nonEnumerableDescriptorCache;return cache[prop]||(cache[prop]={configurable:!0,enumerable:enumerable,get:function(){return initializeInstance(this),this[prop]},set:function(value){initializeInstance(this),this[prop]=value}})}function initializeInstance(target){var e_1,_a;if(!0!==target[mobxDidRunLazyInitializersSymbol]){var decorators=target[mobxPendingDecorators];if(decorators){addHiddenProp(target,mobxDidRunLazyInitializersSymbol,!0);var keys=__spread(Object.getOwnPropertySymbols(decorators),Object.keys(decorators));try{for(var keys_1=__values(keys),keys_1_1=keys_1.next();!keys_1_1.done;keys_1_1=keys_1.next()){var d=decorators[keys_1_1.value];d.propertyCreator(target,d.prop,d.descriptor,d.decoratorTarget,d.decoratorArguments)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{keys_1_1&&!keys_1_1.done&&(_a=keys_1.return)&&_a.call(keys_1)}finally{if(e_1)throw e_1.error}}}}}function createPropDecorator(propertyInitiallyEnumerable,propertyCreator){return function(){var decoratorArguments,decorator=function(target,prop,descriptor,applyImmediately){if(!0===applyImmediately)return propertyCreator(target,prop,descriptor,target,decoratorArguments),null;if(!Object.prototype.hasOwnProperty.call(target,mobxPendingDecorators)){var inheritedDecorators=target[mobxPendingDecorators];addHiddenProp(target,mobxPendingDecorators,__assign({},inheritedDecorators))}return target[mobxPendingDecorators][prop]={prop:prop,propertyCreator:propertyCreator,descriptor:descriptor,decoratorTarget:target,decoratorArguments:decoratorArguments},createPropertyInitializerDescriptor(prop,propertyInitiallyEnumerable)};return quacksLikeADecorator(arguments)?(decoratorArguments=EMPTY_ARRAY,decorator.apply(null,arguments)):(decoratorArguments=Array.prototype.slice.call(arguments),decorator)}}function quacksLikeADecorator(args){return(2===args.length||3===args.length)&&("string"==typeof args[1]||"symbol"==typeof args[1])||4===args.length&&!0===args[3]}function deepEnhancer(v,_,name){return isObservable(v)?v:Array.isArray(v)?observable.array(v,{name:name}):isPlainObject(v)?observable.object(v,void 0,{name:name}):isES6Map(v)?observable.map(v,{name:name}):isES6Set(v)?observable.set(v,{name:name}):v}function referenceEnhancer(newValue){return newValue}function createDecoratorForEnhancer(enhancer){invariant(enhancer);var decorator=createPropDecorator(!0,(function(target,propertyName,descriptor,_decoratorTarget,decoratorArgs){var initialValue=descriptor?descriptor.initializer?descriptor.initializer.call(target):descriptor.value:void 0;asObservableObject(target).addObservableProp(propertyName,initialValue,enhancer)})),res=("undefined"!=typeof process&&process.env,decorator);return res.enhancer=enhancer,res}var defaultCreateObservableOptions={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function asCreateObservableOptions(thing){return null==thing?defaultCreateObservableOptions:"string"==typeof thing?{name:thing,deep:!0,proxy:!0}:thing}Object.freeze(defaultCreateObservableOptions);var deepDecorator=createDecoratorForEnhancer(deepEnhancer),shallowDecorator=createDecoratorForEnhancer((function(v,_,name){return null==v||isObservableObject(v)||isObservableArray(v)||isObservableMap(v)||isObservableSet(v)?v:Array.isArray(v)?observable.array(v,{name:name,deep:!1}):isPlainObject(v)?observable.object(v,void 0,{name:name,deep:!1}):isES6Map(v)?observable.map(v,{name:name,deep:!1}):isES6Set(v)?observable.set(v,{name:name,deep:!1}):fail(!1)})),refDecorator=createDecoratorForEnhancer(referenceEnhancer),refStructDecorator=createDecoratorForEnhancer((function(v,oldValue,name){return deepEqual(v,oldValue)?oldValue:v}));function getEnhancerFromOptions(options){return options.defaultDecorator?options.defaultDecorator.enhancer:!1===options.deep?referenceEnhancer:deepEnhancer}var observableFactories={box:function(value,options){arguments.length>2&&incorrectlyUsedAsDecorator("box");var o=asCreateObservableOptions(options);return new ObservableValue(value,getEnhancerFromOptions(o),o.name,!0,o.equals)},array:function(initialValues,options){arguments.length>2&&incorrectlyUsedAsDecorator("array");var o=asCreateObservableOptions(options);return createObservableArray(initialValues,getEnhancerFromOptions(o),o.name)},map:function(initialValues,options){arguments.length>2&&incorrectlyUsedAsDecorator("map");var o=asCreateObservableOptions(options);return new ObservableMap(initialValues,getEnhancerFromOptions(o),o.name)},set:function(initialValues,options){arguments.length>2&&incorrectlyUsedAsDecorator("set");var o=asCreateObservableOptions(options);return new ObservableSet(initialValues,getEnhancerFromOptions(o),o.name)},object:function(props,decorators,options){"string"==typeof arguments[1]&&incorrectlyUsedAsDecorator("object");var o=asCreateObservableOptions(options);if(!1===o.proxy)return extendObservable({},props,decorators,o);var defaultDecorator=getDefaultDecoratorFromObjectOptions(o),base=extendObservable({},void 0,void 0,o),proxy=createDynamicObservableObject(base);return extendObservableObjectWithProperties(proxy,props,decorators,defaultDecorator),proxy},ref:refDecorator,shallow:shallowDecorator,deep:deepDecorator,struct:refStructDecorator},observable=function(v,arg2,arg3){if("string"==typeof arguments[1]||"symbol"==typeof arguments[1])return deepDecorator.apply(null,arguments);if(isObservable(v))return v;var res=isPlainObject(v)?observable.object(v,arg2,arg3):Array.isArray(v)?observable.array(v,arg2):isES6Map(v)?observable.map(v,arg2):isES6Set(v)?observable.set(v,arg2):v;if(res!==v)return res;fail(!1)};function incorrectlyUsedAsDecorator(methodName){fail("Expected one or two arguments to observable."+methodName+". Did you accidentally try to use observable."+methodName+" as decorator?")}Object.keys(observableFactories).forEach((function(name){return observable[name]=observableFactories[name]}));var IDerivationState,TraceMode,computedDecorator=createPropDecorator(!1,(function(instance,propertyName,descriptor,decoratorTarget,decoratorArgs){var get=descriptor.get,set=descriptor.set,options=decoratorArgs[0]||{};asObservableObject(instance).addComputedProp(instance,propertyName,__assign({get:get,set:set,context:instance},options))})),computedStructDecorator=computedDecorator({equals:comparer.structural}),computed=function(arg1,arg2,arg3){if("string"==typeof arg2)return computedDecorator.apply(null,arguments);if(null!==arg1&&"object"==typeof arg1&&1===arguments.length)return computedDecorator.apply(null,arguments);var opts="object"==typeof arg2?arg2:{};return opts.get=arg1,opts.set="function"==typeof arg2?arg2:opts.set,opts.name=opts.name||arg1.name||"",new ComputedValue(opts)};computed.struct=computedStructDecorator,function(IDerivationState){IDerivationState[IDerivationState.NOT_TRACKING=-1]="NOT_TRACKING",IDerivationState[IDerivationState.UP_TO_DATE=0]="UP_TO_DATE",IDerivationState[IDerivationState.POSSIBLY_STALE=1]="POSSIBLY_STALE",IDerivationState[IDerivationState.STALE=2]="STALE"}(IDerivationState||(IDerivationState={})),function(TraceMode){TraceMode[TraceMode.NONE=0]="NONE",TraceMode[TraceMode.LOG=1]="LOG",TraceMode[TraceMode.BREAK=2]="BREAK"}(TraceMode||(TraceMode={}));var CaughtException=function(cause){this.cause=cause};function isCaughtException(e){return e instanceof CaughtException}function shouldCompute(derivation){switch(derivation.dependenciesState){case IDerivationState.UP_TO_DATE:return!1;case IDerivationState.NOT_TRACKING:case IDerivationState.STALE:return!0;case IDerivationState.POSSIBLY_STALE:for(var prevAllowStateReads=allowStateReadsStart(!0),prevUntracked=untrackedStart(),obs=derivation.observing,l=obs.length,i=0;i<l;i++){var obj=obs[i];if(isComputedValue(obj)){if(globalState.disableErrorBoundaries)obj.get();else try{obj.get()}catch(e){return untrackedEnd(prevUntracked),allowStateReadsEnd(prevAllowStateReads),!0}if(derivation.dependenciesState===IDerivationState.STALE)return untrackedEnd(prevUntracked),allowStateReadsEnd(prevAllowStateReads),!0}}return changeDependenciesStateTo0(derivation),untrackedEnd(prevUntracked),allowStateReadsEnd(prevAllowStateReads),!1}}function checkIfStateModificationsAreAllowed(atom){var hasObservers=atom.observers.size>0;globalState.computationDepth>0&&hasObservers&&fail(!1),globalState.allowStateChanges||!hasObservers&&"strict"!==globalState.enforceActions||fail(!1)}function trackDerivedFunction(derivation,f,context){var prevAllowStateReads=allowStateReadsStart(!0);changeDependenciesStateTo0(derivation),derivation.newObserving=new Array(derivation.observing.length+100),derivation.unboundDepsCount=0,derivation.runId=++globalState.runId;var result,prevTracking=globalState.trackingDerivation;if(globalState.trackingDerivation=derivation,!0===globalState.disableErrorBoundaries)result=f.call(context);else try{result=f.call(context)}catch(e){result=new CaughtException(e)}return globalState.trackingDerivation=prevTracking,function(derivation){for(var prevObserving=derivation.observing,observing=derivation.observing=derivation.newObserving,lowestNewObservingDerivationState=IDerivationState.UP_TO_DATE,i0=0,l=derivation.unboundDepsCount,i=0;i<l;i++){0===(dep=observing[i]).diffValue&&(dep.diffValue=1,i0!==i&&(observing[i0]=dep),i0++),dep.dependenciesState>lowestNewObservingDerivationState&&(lowestNewObservingDerivationState=dep.dependenciesState)}observing.length=i0,derivation.newObserving=null,l=prevObserving.length;for(;l--;){0===(dep=prevObserving[l]).diffValue&&removeObserver(dep,derivation),dep.diffValue=0}for(;i0--;){var dep;1===(dep=observing[i0]).diffValue&&(dep.diffValue=0,addObserver(dep,derivation))}lowestNewObservingDerivationState!==IDerivationState.UP_TO_DATE&&(derivation.dependenciesState=lowestNewObservingDerivationState,derivation.onBecomeStale())}(derivation),allowStateReadsEnd(prevAllowStateReads),result}function clearObserving(derivation){var obs=derivation.observing;derivation.observing=[];for(var i=obs.length;i--;)removeObserver(obs[i],derivation);derivation.dependenciesState=IDerivationState.NOT_TRACKING}function untracked(action){var prev=untrackedStart();try{return action()}finally{untrackedEnd(prev)}}function untrackedStart(){var prev=globalState.trackingDerivation;return globalState.trackingDerivation=null,prev}function untrackedEnd(prev){globalState.trackingDerivation=prev}function allowStateReadsStart(allowStateReads){var prev=globalState.allowStateReads;return globalState.allowStateReads=allowStateReads,prev}function allowStateReadsEnd(prev){globalState.allowStateReads=prev}function changeDependenciesStateTo0(derivation){if(derivation.dependenciesState!==IDerivationState.UP_TO_DATE){derivation.dependenciesState=IDerivationState.UP_TO_DATE;for(var obs=derivation.observing,i=obs.length;i--;)obs[i].lowestObserverState=IDerivationState.UP_TO_DATE}}var currentActionId=0,nextActionId=1,functionNameDescriptor=Object.getOwnPropertyDescriptor((function(){}),"name");functionNameDescriptor&&functionNameDescriptor.configurable;function createAction(actionName,fn,ref){var res=function(){return executeAction(actionName,fn,ref||this,arguments)};return res.isMobxAction=!0,res}function executeAction(actionName,fn,scope,args){var runInfo=function(actionName,scope,args){var notifySpy=isSpyEnabled(),prevDerivation=untrackedStart();startBatch();var prevAllowStateChanges=allowStateChangesStart(!0),prevAllowStateReads=allowStateReadsStart(!0),runInfo={prevDerivation:prevDerivation,prevAllowStateChanges:prevAllowStateChanges,prevAllowStateReads:prevAllowStateReads,notifySpy:notifySpy,startTime:0,actionId:nextActionId++,parentActionId:currentActionId};return currentActionId=runInfo.actionId,runInfo}();try{return fn.apply(scope,args)}catch(err){throw runInfo.error=err,err}finally{!function(runInfo){currentActionId!==runInfo.actionId&&fail("invalid action stack. did you forget to finish an action?");currentActionId=runInfo.parentActionId,void 0!==runInfo.error&&(globalState.suppressReactionErrors=!0);allowStateChangesEnd(runInfo.prevAllowStateChanges),allowStateReadsEnd(runInfo.prevAllowStateReads),endBatch(),untrackedEnd(runInfo.prevDerivation),runInfo.notifySpy&&!1;globalState.suppressReactionErrors=!1}(runInfo)}}function allowStateChangesStart(allowStateChanges){var prev=globalState.allowStateChanges;return globalState.allowStateChanges=allowStateChanges,prev}function allowStateChangesEnd(prev){globalState.allowStateChanges=prev}var ObservableValue=function(_super){function ObservableValue(value,enhancer,name,notifySpy,equals){void 0===name&&(name="ObservableValue@"+getNextId()),void 0===notifySpy&&(notifySpy=!0),void 0===equals&&(equals=comparer.default);var _this=_super.call(this,name)||this;return _this.enhancer=enhancer,_this.name=name,_this.equals=equals,_this.hasUnreportedChange=!1,_this.value=enhancer(value,void 0,name),notifySpy&&isSpyEnabled(),_this}return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}(ObservableValue,_super),ObservableValue.prototype.dehanceValue=function(value){return void 0!==this.dehancer?this.dehancer(value):value},ObservableValue.prototype.set=function(newValue){this.value;if((newValue=this.prepareNewValue(newValue))!==globalState.UNCHANGED){isSpyEnabled();0,this.setNewValue(newValue)}},ObservableValue.prototype.prepareNewValue=function(newValue){if(checkIfStateModificationsAreAllowed(this),hasInterceptors(this)){var change=interceptChange(this,{object:this,type:"update",newValue:newValue});if(!change)return globalState.UNCHANGED;newValue=change.newValue}return newValue=this.enhancer(newValue,this.value,this.name),this.equals(this.value,newValue)?globalState.UNCHANGED:newValue},ObservableValue.prototype.setNewValue=function(newValue){var oldValue=this.value;this.value=newValue,this.reportChanged(),hasListeners(this)&&notifyListeners(this,{type:"update",object:this,newValue:newValue,oldValue:oldValue})},ObservableValue.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},ObservableValue.prototype.intercept=function(handler){return registerInterceptor(this,handler)},ObservableValue.prototype.observe=function(listener,fireImmediately){return fireImmediately&&listener({object:this,type:"update",newValue:this.value,oldValue:void 0}),registerListener(this,listener)},ObservableValue.prototype.toJSON=function(){return this.get()},ObservableValue.prototype.toString=function(){return this.name+"["+this.value+"]"},ObservableValue.prototype.valueOf=function(){return toPrimitive(this.get())},ObservableValue.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},ObservableValue}(Atom),ComputedValue=(createInstanceofPredicate("ObservableValue",ObservableValue),function(){function ComputedValue(options){this.dependenciesState=IDerivationState.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=new Set,this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=IDerivationState.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+getNextId(),this.value=new CaughtException(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=TraceMode.NONE,invariant(options.get,"missing option for computed: get"),this.derivation=options.get,this.name=options.name||"ComputedValue@"+getNextId(),options.set&&(this.setter=createAction(this.name+"-setter",options.set)),this.equals=options.equals||(options.compareStructural||options.struct?comparer.structural:comparer.default),this.scope=options.context,this.requiresReaction=!!options.requiresReaction,this.keepAlive=!!options.keepAlive}return ComputedValue.prototype.onBecomeStale=function(){!function(observable){if(observable.lowestObserverState!==IDerivationState.UP_TO_DATE)return;observable.lowestObserverState=IDerivationState.POSSIBLY_STALE,observable.observers.forEach((function(d){d.dependenciesState===IDerivationState.UP_TO_DATE&&(d.dependenciesState=IDerivationState.POSSIBLY_STALE,d.isTracing!==TraceMode.NONE&&logTraceInfo(d,observable),d.onBecomeStale())}))}(this)},ComputedValue.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach((function(listener){return listener()}))},ComputedValue.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach((function(listener){return listener()}))},ComputedValue.prototype.get=function(){this.isComputing&&fail("Cycle detected in computation "+this.name+": "+this.derivation),0!==globalState.inBatch||0!==this.observers.size||this.keepAlive?(reportObserved(this),shouldCompute(this)&&this.trackAndCompute()&&function(observable){if(observable.lowestObserverState===IDerivationState.STALE)return;observable.lowestObserverState=IDerivationState.STALE,observable.observers.forEach((function(d){d.dependenciesState===IDerivationState.POSSIBLY_STALE?d.dependenciesState=IDerivationState.STALE:d.dependenciesState===IDerivationState.UP_TO_DATE&&(observable.lowestObserverState=IDerivationState.UP_TO_DATE)}))}(this)):shouldCompute(this)&&(this.warnAboutUntrackedRead(),startBatch(),this.value=this.computeValue(!1),endBatch());var result=this.value;if(isCaughtException(result))throw result.cause;return result},ComputedValue.prototype.peek=function(){var res=this.computeValue(!1);if(isCaughtException(res))throw res.cause;return res},ComputedValue.prototype.set=function(value){if(this.setter){invariant(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,value)}finally{this.isRunningSetter=!1}}else invariant(!1,!1)},ComputedValue.prototype.trackAndCompute=function(){var oldValue=this.value,wasSuspended=this.dependenciesState===IDerivationState.NOT_TRACKING,newValue=this.computeValue(!0),changed=wasSuspended||isCaughtException(oldValue)||isCaughtException(newValue)||!this.equals(oldValue,newValue);return changed&&(this.value=newValue),changed},ComputedValue.prototype.computeValue=function(track){var res;if(this.isComputing=!0,globalState.computationDepth++,track)res=trackDerivedFunction(this,this.derivation,this.scope);else if(!0===globalState.disableErrorBoundaries)res=this.derivation.call(this.scope);else try{res=this.derivation.call(this.scope)}catch(e){res=new CaughtException(e)}return globalState.computationDepth--,this.isComputing=!1,res},ComputedValue.prototype.suspend=function(){this.keepAlive||(clearObserving(this),this.value=void 0)},ComputedValue.prototype.observe=function(listener,fireImmediately){var _this=this,firstTime=!0,prevValue=void 0;return autorun((function(){var newValue=_this.get();if(!firstTime||fireImmediately){var prevU=untrackedStart();listener({type:"update",object:_this,newValue:newValue,oldValue:prevValue}),untrackedEnd(prevU)}firstTime=!1,prevValue=newValue}))},ComputedValue.prototype.warnAboutUntrackedRead=function(){},ComputedValue.prototype.toJSON=function(){return this.get()},ComputedValue.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},ComputedValue.prototype.valueOf=function(){return toPrimitive(this.get())},ComputedValue.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},ComputedValue}()),isComputedValue=createInstanceofPredicate("ComputedValue",ComputedValue),MobXGlobals=function(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1},mockGlobal={};function getGlobal(){return"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:mockGlobal}var canMergeGlobalState=!0,isolateCalled=!1,globalState=function(){var global=getGlobal();return global.__mobxInstanceCount>0&&!global.__mobxGlobals&&(canMergeGlobalState=!1),global.__mobxGlobals&&global.__mobxGlobals.version!==(new MobXGlobals).version&&(canMergeGlobalState=!1),canMergeGlobalState?global.__mobxGlobals?(global.__mobxInstanceCount+=1,global.__mobxGlobals.UNCHANGED||(global.__mobxGlobals.UNCHANGED={}),global.__mobxGlobals):(global.__mobxInstanceCount=1,global.__mobxGlobals=new MobXGlobals):(setTimeout((function(){isolateCalled||fail("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")}),1),new MobXGlobals)}();function getGlobalState(){return globalState}function addObserver(observable,node){observable.observers.add(node),observable.lowestObserverState>node.dependenciesState&&(observable.lowestObserverState=node.dependenciesState)}function removeObserver(observable,node){observable.observers.delete(node),0===observable.observers.size&&queueForUnobservation(observable)}function queueForUnobservation(observable){!1===observable.isPendingUnobservation&&(observable.isPendingUnobservation=!0,globalState.pendingUnobservations.push(observable))}function startBatch(){globalState.inBatch++}function endBatch(){if(0==--globalState.inBatch){runReactions();for(var list=globalState.pendingUnobservations,i=0;i<list.length;i++){var observable=list[i];observable.isPendingUnobservation=!1,0===observable.observers.size&&(observable.isBeingObserved&&(observable.isBeingObserved=!1,observable.onBecomeUnobserved()),observable instanceof ComputedValue&&observable.suspend())}globalState.pendingUnobservations=[]}}function reportObserved(observable){var derivation=globalState.trackingDerivation;return null!==derivation?(derivation.runId!==observable.lastAccessedBy&&(observable.lastAccessedBy=derivation.runId,derivation.newObserving[derivation.unboundDepsCount++]=observable,observable.isBeingObserved||(observable.isBeingObserved=!0,observable.onBecomeObserved())),!0):(0===observable.observers.size&&globalState.inBatch>0&&queueForUnobservation(observable),!1)}function logTraceInfo(derivation,observable){if(console.log("[mobx.trace] '"+derivation.name+"' is invalidated due to a change in: '"+observable.name+"'"),derivation.isTracing===TraceMode.BREAK){var lines=[];!function printDepTree(tree,lines,depth){if(lines.length>=1e3)return void lines.push("(and many more)");lines.push(""+new Array(depth).join("\t")+tree.name),tree.dependencies&&tree.dependencies.forEach((function(child){return printDepTree(child,lines,depth+1)}))}((thing=derivation,nodeToDependencyTree(getAtom(thing,property))),lines,1),new Function("debugger;\n/*\nTracing '"+derivation.name+"'\n\nYou are entering this break point because derivation '"+derivation.name+"' is being traced and '"+observable.name+"' is now forcing it to update.\nJust follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update\nThe stackframe you are looking for is at least ~6-8 stack-frames up.\n\n"+(derivation instanceof ComputedValue?derivation.derivation.toString().replace(/[*]\//g,"/"):"")+"\n\nThe dependencies for this derivation are:\n\n"+lines.join("\n")+"\n*/\n    ")()}var thing,property}var Reaction=function(){function Reaction(name,onInvalidate,errorHandler,requiresObservable){void 0===name&&(name="Reaction@"+getNextId()),void 0===requiresObservable&&(requiresObservable=!1),this.name=name,this.onInvalidate=onInvalidate,this.errorHandler=errorHandler,this.requiresObservable=requiresObservable,this.observing=[],this.newObserving=[],this.dependenciesState=IDerivationState.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+getNextId(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=TraceMode.NONE}return Reaction.prototype.onBecomeStale=function(){this.schedule()},Reaction.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,globalState.pendingReactions.push(this),runReactions())},Reaction.prototype.isScheduled=function(){return this._isScheduled},Reaction.prototype.runReaction=function(){if(!this.isDisposed){if(startBatch(),this._isScheduled=!1,shouldCompute(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending&&isSpyEnabled()}catch(e){this.reportExceptionInDerivation(e)}}endBatch()}},Reaction.prototype.track=function(fn){if(!this.isDisposed){startBatch(),this._isRunning=!0;var result=trackDerivedFunction(this,fn,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&clearObserving(this),isCaughtException(result)&&this.reportExceptionInDerivation(result.cause),endBatch()}},Reaction.prototype.reportExceptionInDerivation=function(error){var _this=this;if(this.errorHandler)this.errorHandler(error,this);else{if(globalState.disableErrorBoundaries)throw error;var message="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this+"'";globalState.suppressReactionErrors?console.warn("[mobx] (error in reaction '"+this.name+"' suppressed, fix error of causing action below)"):console.error(message,error),globalState.globalReactionErrorHandlers.forEach((function(f){return f(error,_this)}))}},Reaction.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(startBatch(),clearObserving(this),endBatch()))},Reaction.prototype.getDisposer=function(){var r=this.dispose.bind(this);return r[$mobx]=this,r},Reaction.prototype.toString=function(){return"Reaction["+this.name+"]"},Reaction.prototype.trace=function(enterBreakPoint){void 0===enterBreakPoint&&(enterBreakPoint=!1),function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var enterBreakPoint=!1;"boolean"==typeof args[args.length-1]&&(enterBreakPoint=args.pop());var derivation=getAtomFromArgs(args);if(!derivation)return fail(!1);derivation.isTracing===TraceMode.NONE&&console.log("[mobx.trace] '"+derivation.name+"' tracing enabled");derivation.isTracing=enterBreakPoint?TraceMode.BREAK:TraceMode.LOG}(this,enterBreakPoint)},Reaction}(),reactionScheduler=function(f){return f()};function runReactions(){globalState.inBatch>0||globalState.isRunningReactions||reactionScheduler(runReactionsHelper)}function runReactionsHelper(){globalState.isRunningReactions=!0;for(var allReactions=globalState.pendingReactions,iterations=0;allReactions.length>0;){100==++iterations&&(console.error("Reaction doesn't converge to a stable state after 100 iterations. Probably there is a cycle in the reactive function: "+allReactions[0]),allReactions.splice(0));for(var remainingReactions=allReactions.splice(0),i=0,l=remainingReactions.length;i<l;i++)remainingReactions[i].runReaction()}globalState.isRunningReactions=!1}var isReaction=createInstanceofPredicate("Reaction",Reaction);function setReactionScheduler(fn){var baseScheduler=reactionScheduler;reactionScheduler=function(f){return fn((function(){return baseScheduler(f)}))}}function isSpyEnabled(){return!1}function dontReassignFields(){fail(!1)}function namedActionDecorator(name){return function(target,prop,descriptor){if(descriptor){if(descriptor.value)return{value:createAction(name,descriptor.value),enumerable:!1,configurable:!0,writable:!0};var initializer_1=descriptor.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return createAction(name,initializer_1.call(this))}}}return actionFieldDecorator(name).apply(this,arguments)}}function actionFieldDecorator(name){return function(target,prop,descriptor){Object.defineProperty(target,prop,{configurable:!0,enumerable:!1,get:function(){},set:function(value){addHiddenProp(this,prop,action(name,value))}})}}var action=function(arg1,arg2,arg3,arg4){return 1===arguments.length&&"function"==typeof arg1?createAction(arg1.name||"<unnamed action>",arg1):2===arguments.length&&"function"==typeof arg2?createAction(arg1,arg2):1===arguments.length&&"string"==typeof arg1?namedActionDecorator(arg1):!0!==arg4?namedActionDecorator(arg2).apply(null,arguments):void addHiddenProp(arg1,arg2,createAction(arg1.name||arg2,arg3.value,this))};function runInAction(arg1,arg2){"string"==typeof arg1||arg1.name;return executeAction(0,"function"==typeof arg1?arg1:arg2,this,void 0)}function defineBoundAction(target,propertyName,fn){addHiddenProp(target,propertyName,createAction(propertyName,fn.bind(target)))}function autorun(view,opts){void 0===opts&&(opts=EMPTY_OBJECT);var reaction,name=opts&&opts.name||view.name||"Autorun@"+getNextId();if(!opts.scheduler&&!opts.delay)reaction=new Reaction(name,(function(){this.track(reactionRunner)}),opts.onError,opts.requiresObservable);else{var scheduler_1=createSchedulerFromOptions(opts),isScheduled_1=!1;reaction=new Reaction(name,(function(){isScheduled_1||(isScheduled_1=!0,scheduler_1((function(){isScheduled_1=!1,reaction.isDisposed||reaction.track(reactionRunner)})))}),opts.onError,opts.requiresObservable)}function reactionRunner(){view(reaction)}return reaction.schedule(),reaction.getDisposer()}action.bound=function(target,propertyName,descriptor,applyToInstance){return!0===applyToInstance?(defineBoundAction(target,propertyName,descriptor.value),null):descriptor?{configurable:!0,enumerable:!1,get:function(){return defineBoundAction(this,propertyName,descriptor.value||descriptor.initializer.call(this)),this[propertyName]},set:dontReassignFields}:{enumerable:!1,configurable:!0,set:function(v){defineBoundAction(this,propertyName,v)},get:function(){}}};var run=function(f){return f()};function createSchedulerFromOptions(opts){return opts.scheduler?opts.scheduler:opts.delay?function(f){return setTimeout(f,opts.delay)}:run}function reaction(expression,effect,opts){void 0===opts&&(opts=EMPTY_OBJECT);var errorHandler,baseFn,value,name=opts.name||"Reaction@"+getNextId(),effectAction=action(name,opts.onError?(errorHandler=opts.onError,baseFn=effect,function(){try{return baseFn.apply(this,arguments)}catch(e){errorHandler.call(this,e)}}):effect),runSync=!opts.scheduler&&!opts.delay,scheduler=createSchedulerFromOptions(opts),firstTime=!0,isScheduled=!1,equals=opts.compareStructural?comparer.structural:opts.equals||comparer.default,r=new Reaction(name,(function(){firstTime||runSync?reactionRunner():isScheduled||(isScheduled=!0,scheduler(reactionRunner))}),opts.onError,opts.requiresObservable);function reactionRunner(){if(isScheduled=!1,!r.isDisposed){var changed=!1;r.track((function(){var nextValue=expression(r);changed=firstTime||!equals(value,nextValue),value=nextValue})),firstTime&&opts.fireImmediately&&effectAction(value,r),firstTime||!0!==changed||effectAction(value,r),firstTime&&(firstTime=!1)}}return r.schedule(),r.getDisposer()}function onBecomeUnobserved(thing,arg2,arg3){return interceptHook("onBecomeUnobserved",thing,arg2,arg3)}function interceptHook(hook,thing,arg2,arg3){var atom="function"==typeof arg3?getAtom(thing,arg2):getAtom(thing),cb="function"==typeof arg3?arg3:arg2,listenersKey=hook+"Listeners";return atom[listenersKey]?atom[listenersKey].add(cb):atom[listenersKey]=new Set([cb]),"function"!=typeof atom[hook]?fail(!1):function(){var hookListeners=atom[listenersKey];hookListeners&&(hookListeners.delete(cb),0===hookListeners.size&&delete atom[listenersKey])}}function configure(options){var enforceActions=options.enforceActions,computedRequiresReaction=options.computedRequiresReaction,computedConfigurable=options.computedConfigurable,disableErrorBoundaries=options.disableErrorBoundaries,reactionScheduler=options.reactionScheduler,reactionRequiresObservable=options.reactionRequiresObservable,observableRequiresReaction=options.observableRequiresReaction;if(!0===options.isolateGlobalState&&((globalState.pendingReactions.length||globalState.inBatch||globalState.isRunningReactions)&&fail("isolateGlobalState should be called before MobX is running any reactions"),isolateCalled=!0,canMergeGlobalState&&(0==--getGlobal().__mobxInstanceCount&&(getGlobal().__mobxGlobals=void 0),globalState=new MobXGlobals)),void 0!==enforceActions){var ea=void 0;switch(enforceActions){case!0:case"observed":ea=!0;break;case!1:case"never":ea=!1;break;case"strict":case"always":ea="strict";break;default:fail("Invalid value for 'enforceActions': '"+enforceActions+"', expected 'never', 'always' or 'observed'")}globalState.enforceActions=ea,globalState.allowStateChanges=!0!==ea&&"strict"!==ea}void 0!==computedRequiresReaction&&(globalState.computedRequiresReaction=!!computedRequiresReaction),void 0!==reactionRequiresObservable&&(globalState.reactionRequiresObservable=!!reactionRequiresObservable),void 0!==observableRequiresReaction&&(globalState.observableRequiresReaction=!!observableRequiresReaction,globalState.allowStateReads=!globalState.observableRequiresReaction),void 0!==computedConfigurable&&(globalState.computedConfigurable=!!computedConfigurable),void 0!==disableErrorBoundaries&&(!0===disableErrorBoundaries&&console.warn("WARNING: Debug feature only. MobX will NOT recover from errors when `disableErrorBoundaries` is enabled."),globalState.disableErrorBoundaries=!!disableErrorBoundaries),reactionScheduler&&setReactionScheduler(reactionScheduler)}function extendObservable(target,properties,decorators,options){var defaultDecorator=getDefaultDecoratorFromObjectOptions(options=asCreateObservableOptions(options));return initializeInstance(target),asObservableObject(target,options.name,defaultDecorator.enhancer),properties&&extendObservableObjectWithProperties(target,properties,decorators,defaultDecorator),target}function getDefaultDecoratorFromObjectOptions(options){return options.defaultDecorator||(!1===options.deep?refDecorator:deepDecorator)}function extendObservableObjectWithProperties(target,properties,decorators,defaultDecorator){var e_2,_b;startBatch();try{var keys=getPlainObjectKeys(properties);try{for(var keys_2=__values(keys),keys_2_1=keys_2.next();!keys_2_1.done;keys_2_1=keys_2.next()){var key=keys_2_1.value,descriptor=Object.getOwnPropertyDescriptor(properties,key);0;var decorator=decorators&&key in decorators?decorators[key]:descriptor.get?computedDecorator:defaultDecorator;0;var resultDescriptor=decorator(target,key,descriptor,!0);resultDescriptor&&Object.defineProperty(target,key,resultDescriptor)}}catch(e_2_1){e_2={error:e_2_1}}finally{try{keys_2_1&&!keys_2_1.done&&(_b=keys_2.return)&&_b.call(keys_2)}finally{if(e_2)throw e_2.error}}}finally{endBatch()}}function nodeToDependencyTree(node){var list,res,result={name:node.name};return node.observing&&node.observing.length>0&&(result.dependencies=(list=node.observing,res=[],list.forEach((function(item){-1===res.indexOf(item)&&res.push(item)})),res).map(nodeToDependencyTree)),result}function _isComputed(value,property){if(null==value)return!1;if(void 0!==property){if(!1===isObservableObject(value))return!1;if(!value[$mobx].values.has(property))return!1;var atom=getAtom(value,property);return isComputedValue(atom)}return isComputedValue(value)}function isComputed(value){return arguments.length>1?fail(!1):_isComputed(value)}function _isObservable(value,property){return null!=value&&(void 0!==property?!!isObservableObject(value)&&value[$mobx].values.has(property):isObservableObject(value)||!!value[$mobx]||isAtom(value)||isReaction(value)||isComputedValue(value))}function isObservable(value){return 1!==arguments.length&&fail(!1),_isObservable(value)}function getAtomFromArgs(args){switch(args.length){case 0:return globalState.trackingDerivation;case 1:return getAtom(args[0]);case 2:return getAtom(args[0],args[1])}}function transaction(action,thisArg){void 0===thisArg&&(thisArg=void 0),startBatch();try{return action.apply(thisArg)}finally{endBatch()}}function getAdm(target){return target[$mobx]}function isPropertyKey(val){return"string"==typeof val||"number"==typeof val||"symbol"==typeof val}var objectProxyTraps={has:function(target,name){if(name===$mobx||"constructor"===name||name===mobxDidRunLazyInitializersSymbol)return!0;var adm=getAdm(target);return isPropertyKey(name)?adm.has(name):name in target},get:function(target,name){if(name===$mobx||"constructor"===name||name===mobxDidRunLazyInitializersSymbol)return target[name];var adm=getAdm(target),observable=adm.values.get(name);if(observable instanceof Atom){var result=observable.get();return void 0===result&&adm.has(name),result}return isPropertyKey(name)&&adm.has(name),target[name]},set:function(target,name,value){return!!isPropertyKey(name)&&(function set(obj,key,value){if(2!==arguments.length||isObservableSet(obj))if(isObservableObject(obj)){var adm=obj[$mobx],existingObservable=adm.values.get(key);existingObservable?adm.write(key,value):adm.addObservableProp(key,value,adm.defaultEnhancer)}else if(isObservableMap(obj))obj.set(key,value);else if(isObservableSet(obj))obj.add(key);else{if(!isObservableArray(obj))return fail(!1);"number"!=typeof key&&(key=parseInt(key,10)),invariant(key>=0,"Not a valid index: '"+key+"'"),startBatch(),key>=obj.length&&(obj.length=key+1),obj[key]=value,endBatch()}else{startBatch();var values_1=key;try{for(var key_1 in values_1)set(obj,key_1,values_1[key_1])}finally{endBatch()}}}(target,name,value),!0)},deleteProperty:function(target,name){return!!isPropertyKey(name)&&(getAdm(target).remove(name),!0)},ownKeys:function(target){return getAdm(target).keysAtom.reportObserved(),Reflect.ownKeys(target)},preventExtensions:function(target){return fail("Dynamic observable objects cannot be frozen"),!1}};function createDynamicObservableObject(base){var proxy=new Proxy(base,objectProxyTraps);return base[$mobx].proxy=proxy,proxy}function hasInterceptors(interceptable){return void 0!==interceptable.interceptors&&interceptable.interceptors.length>0}function registerInterceptor(interceptable,handler){var interceptors=interceptable.interceptors||(interceptable.interceptors=[]);return interceptors.push(handler),once((function(){var idx=interceptors.indexOf(handler);-1!==idx&&interceptors.splice(idx,1)}))}function interceptChange(interceptable,change){var prevU=untrackedStart();try{for(var interceptors=__spread(interceptable.interceptors||[]),i=0,l=interceptors.length;i<l&&(invariant(!(change=interceptors[i](change))||change.type,"Intercept handlers should return nothing or a change object"),change);i++);return change}finally{untrackedEnd(prevU)}}function hasListeners(listenable){return void 0!==listenable.changeListeners&&listenable.changeListeners.length>0}function registerListener(listenable,handler){var listeners=listenable.changeListeners||(listenable.changeListeners=[]);return listeners.push(handler),once((function(){var idx=listeners.indexOf(handler);-1!==idx&&listeners.splice(idx,1)}))}function notifyListeners(listenable,change){var prevU=untrackedStart(),listeners=listenable.changeListeners;if(listeners){for(var i=0,l=(listeners=listeners.slice()).length;i<l;i++)listeners[i](change);untrackedEnd(prevU)}}var arrayTraps={get:function(target,name){return name===$mobx?target[$mobx]:"length"===name?target[$mobx].getArrayLength():"number"==typeof name?arrayExtensions.get.call(target,name):"string"!=typeof name||isNaN(name)?arrayExtensions.hasOwnProperty(name)?arrayExtensions[name]:target[name]:arrayExtensions.get.call(target,parseInt(name))},set:function(target,name,value){return"length"===name&&target[$mobx].setArrayLength(value),"number"==typeof name&&arrayExtensions.set.call(target,name,value),"symbol"==typeof name||isNaN(name)?target[name]=value:arrayExtensions.set.call(target,parseInt(name),value),!0},preventExtensions:function(target){return fail("Observable arrays cannot be frozen"),!1}};function createObservableArray(initialValues,enhancer,name,owned){void 0===name&&(name="ObservableArray@"+getNextId()),void 0===owned&&(owned=!1);var object,propName,value,adm=new ObservableArrayAdministration(name,enhancer,owned);object=adm.values,propName=$mobx,value=adm,Object.defineProperty(object,propName,{enumerable:!1,writable:!1,configurable:!0,value:value});var proxy=new Proxy(adm.values,arrayTraps);if(adm.proxy=proxy,initialValues&&initialValues.length){var prev=allowStateChangesStart(!0);adm.spliceWithArray(0,0,initialValues),allowStateChangesEnd(prev)}return proxy}var ObservableArrayAdministration=function(){function ObservableArrayAdministration(name,enhancer,owned){this.owned=owned,this.values=[],this.proxy=void 0,this.lastKnownLength=0,this.atom=new Atom(name||"ObservableArray@"+getNextId()),this.enhancer=function(newV,oldV){return enhancer(newV,oldV,name+"[..]")}}return ObservableArrayAdministration.prototype.dehanceValue=function(value){return void 0!==this.dehancer?this.dehancer(value):value},ObservableArrayAdministration.prototype.dehanceValues=function(values){return void 0!==this.dehancer&&values.length>0?values.map(this.dehancer):values},ObservableArrayAdministration.prototype.intercept=function(handler){return registerInterceptor(this,handler)},ObservableArrayAdministration.prototype.observe=function(listener,fireImmediately){return void 0===fireImmediately&&(fireImmediately=!1),fireImmediately&&listener({object:this.proxy,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),registerListener(this,listener)},ObservableArrayAdministration.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},ObservableArrayAdministration.prototype.setArrayLength=function(newLength){if("number"!=typeof newLength||newLength<0)throw new Error("[mobx.array] Out of range: "+newLength);var currentLength=this.values.length;if(newLength!==currentLength)if(newLength>currentLength){for(var newItems=new Array(newLength-currentLength),i=0;i<newLength-currentLength;i++)newItems[i]=void 0;this.spliceWithArray(currentLength,0,newItems)}else this.spliceWithArray(newLength,currentLength-newLength)},ObservableArrayAdministration.prototype.updateArrayLength=function(oldLength,delta){if(oldLength!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed.");this.lastKnownLength+=delta},ObservableArrayAdministration.prototype.spliceWithArray=function(index,deleteCount,newItems){var _this=this;checkIfStateModificationsAreAllowed(this.atom);var length=this.values.length;if(void 0===index?index=0:index>length?index=length:index<0&&(index=Math.max(0,length+index)),deleteCount=1===arguments.length?length-index:null==deleteCount?0:Math.max(0,Math.min(deleteCount,length-index)),void 0===newItems&&(newItems=EMPTY_ARRAY),hasInterceptors(this)){var change=interceptChange(this,{object:this.proxy,type:"splice",index:index,removedCount:deleteCount,added:newItems});if(!change)return EMPTY_ARRAY;deleteCount=change.removedCount,newItems=change.added}newItems=0===newItems.length?newItems:newItems.map((function(v){return _this.enhancer(v,void 0)}));var res=this.spliceItemsIntoValues(index,deleteCount,newItems);return 0===deleteCount&&0===newItems.length||this.notifyArraySplice(index,newItems,res),this.dehanceValues(res)},ObservableArrayAdministration.prototype.spliceItemsIntoValues=function(index,deleteCount,newItems){var _a;if(newItems.length<1e4)return(_a=this.values).splice.apply(_a,__spread([index,deleteCount],newItems));var res=this.values.slice(index,index+deleteCount);return this.values=this.values.slice(0,index).concat(newItems,this.values.slice(index+deleteCount)),res},ObservableArrayAdministration.prototype.notifyArrayChildUpdate=function(index,newValue,oldValue){var notifySpy=!this.owned&&!1,notify=hasListeners(this),change=notify||notifySpy?{object:this.proxy,type:"update",index:index,newValue:newValue,oldValue:oldValue}:null;this.atom.reportChanged(),notify&&notifyListeners(this,change)},ObservableArrayAdministration.prototype.notifyArraySplice=function(index,added,removed){var notifySpy=!this.owned&&!1,notify=hasListeners(this),change=notify||notifySpy?{object:this.proxy,type:"splice",index:index,removed:removed,added:added,removedCount:removed.length,addedCount:added.length}:null;this.atom.reportChanged(),notify&&notifyListeners(this,change)},ObservableArrayAdministration}(),arrayExtensions={intercept:function(handler){return this[$mobx].intercept(handler)},observe:function(listener,fireImmediately){return void 0===fireImmediately&&(fireImmediately=!1),this[$mobx].observe(listener,fireImmediately)},clear:function(){return this.splice(0)},replace:function(newItems){var adm=this[$mobx];return adm.spliceWithArray(0,adm.values.length,newItems)},toJS:function(){return this.slice()},toJSON:function(){return this.toJS()},splice:function(index,deleteCount){for(var newItems=[],_i=2;_i<arguments.length;_i++)newItems[_i-2]=arguments[_i];var adm=this[$mobx];switch(arguments.length){case 0:return[];case 1:return adm.spliceWithArray(index);case 2:return adm.spliceWithArray(index,deleteCount)}return adm.spliceWithArray(index,deleteCount,newItems)},spliceWithArray:function(index,deleteCount,newItems){return this[$mobx].spliceWithArray(index,deleteCount,newItems)},push:function(){for(var items=[],_i=0;_i<arguments.length;_i++)items[_i]=arguments[_i];var adm=this[$mobx];return adm.spliceWithArray(adm.values.length,0,items),adm.values.length},pop:function(){return this.splice(Math.max(this[$mobx].values.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var items=[],_i=0;_i<arguments.length;_i++)items[_i]=arguments[_i];var adm=this[$mobx];return adm.spliceWithArray(0,0,items),adm.values.length},reverse:function(){var clone=this.slice();return clone.reverse.apply(clone,arguments)},sort:function(compareFn){var clone=this.slice();return clone.sort.apply(clone,arguments)},remove:function(value){var adm=this[$mobx],idx=adm.dehanceValues(adm.values).indexOf(value);return idx>-1&&(this.splice(idx,1),!0)},get:function(index){var adm=this[$mobx];if(adm){if(index<adm.values.length)return adm.atom.reportObserved(),adm.dehanceValue(adm.values[index]);console.warn("[mobx.array] Attempt to read an array index ("+index+") that is out of bounds ("+adm.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}},set:function(index,newValue){var adm=this[$mobx],values=adm.values;if(index<values.length){checkIfStateModificationsAreAllowed(adm.atom);var oldValue=values[index];if(hasInterceptors(adm)){var change=interceptChange(adm,{type:"update",object:adm.proxy,index:index,newValue:newValue});if(!change)return;newValue=change.newValue}(newValue=adm.enhancer(newValue,oldValue))!==oldValue&&(values[index]=newValue,adm.notifyArrayChildUpdate(index,newValue,oldValue))}else{if(index!==values.length)throw new Error("[mobx.array] Index out of bounds, "+index+" is larger than "+values.length);adm.spliceWithArray(index,0,[newValue])}}};["concat","every","filter","forEach","indexOf","join","lastIndexOf","map","reduce","reduceRight","slice","some","toString","toLocaleString"].forEach((function(funcName){arrayExtensions[funcName]=function(){var adm=this[$mobx];adm.atom.reportObserved();var res=adm.dehanceValues(adm.values);return res[funcName].apply(res,arguments)}}));var _a,isObservableArrayAdministration=createInstanceofPredicate("ObservableArrayAdministration",ObservableArrayAdministration);function isObservableArray(thing){return isObject(thing)&&isObservableArrayAdministration(thing[$mobx])}var _a$1,ObservableMapMarker={},ObservableMap=function(){function ObservableMap(initialData,enhancer,name){if(void 0===enhancer&&(enhancer=deepEnhancer),void 0===name&&(name="ObservableMap@"+getNextId()),this.enhancer=enhancer,this.name=name,this[_a]=ObservableMapMarker,this._keysAtom=createAtom(this.name+".keys()"),this[Symbol.toStringTag]="Map","function"!=typeof Map)throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(initialData)}return ObservableMap.prototype._has=function(key){return this._data.has(key)},ObservableMap.prototype.has=function(key){var _this=this;if(!globalState.trackingDerivation)return this._has(key);var entry=this._hasMap.get(key);if(!entry){var newEntry=entry=new ObservableValue(this._has(key),referenceEnhancer,this.name+"."+stringifyKey(key)+"?",!1);this._hasMap.set(key,newEntry),onBecomeUnobserved(newEntry,(function(){return _this._hasMap.delete(key)}))}return entry.get()},ObservableMap.prototype.set=function(key,value){var hasKey=this._has(key);if(hasInterceptors(this)){var change=interceptChange(this,{type:hasKey?"update":"add",object:this,newValue:value,name:key});if(!change)return this;value=change.newValue}return hasKey?this._updateValue(key,value):this._addValue(key,value),this},ObservableMap.prototype.delete=function(key){var _this=this;if(hasInterceptors(this)&&!(change=interceptChange(this,{type:"delete",object:this,name:key})))return!1;if(this._has(key)){var notify=hasListeners(this),change=notify?{type:"delete",object:this,oldValue:this._data.get(key).value,name:key}:null;return transaction((function(){_this._keysAtom.reportChanged(),_this._updateHasMapEntry(key,!1),_this._data.get(key).setNewValue(void 0),_this._data.delete(key)})),notify&&notifyListeners(this,change),!0}return!1},ObservableMap.prototype._updateHasMapEntry=function(key,value){var entry=this._hasMap.get(key);entry&&entry.setNewValue(value)},ObservableMap.prototype._updateValue=function(key,newValue){var observable=this._data.get(key);if((newValue=observable.prepareNewValue(newValue))!==globalState.UNCHANGED){var notify=hasListeners(this),change=notify?{type:"update",object:this,oldValue:observable.value,name:key,newValue:newValue}:null;0,observable.setNewValue(newValue),notify&&notifyListeners(this,change)}},ObservableMap.prototype._addValue=function(key,newValue){var _this=this;checkIfStateModificationsAreAllowed(this._keysAtom),transaction((function(){var observable=new ObservableValue(newValue,_this.enhancer,_this.name+"."+stringifyKey(key),!1);_this._data.set(key,observable),newValue=observable.value,_this._updateHasMapEntry(key,!0),_this._keysAtom.reportChanged()}));var notify=hasListeners(this);notify&&notifyListeners(this,notify?{type:"add",object:this,name:key,newValue:newValue}:null)},ObservableMap.prototype.get=function(key){return this.has(key)?this.dehanceValue(this._data.get(key).get()):this.dehanceValue(void 0)},ObservableMap.prototype.dehanceValue=function(value){return void 0!==this.dehancer?this.dehancer(value):value},ObservableMap.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},ObservableMap.prototype.values=function(){var self=this,nextIndex=0,keys=Array.from(this.keys());return makeIterable({next:function(){return nextIndex<keys.length?{value:self.get(keys[nextIndex++]),done:!1}:{done:!0}}})},ObservableMap.prototype.entries=function(){var self=this,nextIndex=0,keys=Array.from(this.keys());return makeIterable({next:function(){if(nextIndex<keys.length){var key=keys[nextIndex++];return{value:[key,self.get(key)],done:!1}}return{done:!0}}})},ObservableMap.prototype[(_a=$mobx,Symbol.iterator)]=function(){return this.entries()},ObservableMap.prototype.forEach=function(callback,thisArg){var e_1,_b;try{for(var _c=__values(this),_d=_c.next();!_d.done;_d=_c.next()){var _e=__read(_d.value,2),key=_e[0],value=_e[1];callback.call(thisArg,value,key,this)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_d&&!_d.done&&(_b=_c.return)&&_b.call(_c)}finally{if(e_1)throw e_1.error}}},ObservableMap.prototype.merge=function(other){var _this=this;return isObservableMap(other)&&(other=other.toJS()),transaction((function(){isPlainObject(other)?getPlainObjectKeys(other).forEach((function(key){return _this.set(key,other[key])})):Array.isArray(other)?other.forEach((function(_b){var _c=__read(_b,2),key=_c[0],value=_c[1];return _this.set(key,value)})):isES6Map(other)?(other.constructor!==Map&&fail("Cannot initialize from classes that inherit from Map: "+other.constructor.name),other.forEach((function(value,key){return _this.set(key,value)}))):null!=other&&fail("Cannot initialize map from "+other)})),this},ObservableMap.prototype.clear=function(){var _this=this;transaction((function(){untracked((function(){var e_2,_b;try{for(var _c=__values(_this.keys()),_d=_c.next();!_d.done;_d=_c.next()){var key=_d.value;_this.delete(key)}}catch(e_2_1){e_2={error:e_2_1}}finally{try{_d&&!_d.done&&(_b=_c.return)&&_b.call(_c)}finally{if(e_2)throw e_2.error}}}))}))},ObservableMap.prototype.replace=function(values){var _this=this;return transaction((function(){var map,newKeys=isPlainObject(map=values)?Object.keys(map):Array.isArray(map)?map.map((function(_a){return __read(_a,1)[0]})):isES6Map(map)||isObservableMap(map)?Array.from(map.keys()):fail("Cannot get keys from '"+map+"'");Array.from(_this.keys()).filter((function(k){return-1===newKeys.indexOf(k)})).forEach((function(k){return _this.delete(k)})),_this.merge(values)})),this},Object.defineProperty(ObservableMap.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),ObservableMap.prototype.toPOJO=function(){var e_3,_b,res={};try{for(var _c=__values(this),_d=_c.next();!_d.done;_d=_c.next()){var _e=__read(_d.value,2),key=_e[0],value=_e[1];res["symbol"==typeof key?key:stringifyKey(key)]=value}}catch(e_3_1){e_3={error:e_3_1}}finally{try{_d&&!_d.done&&(_b=_c.return)&&_b.call(_c)}finally{if(e_3)throw e_3.error}}return res},ObservableMap.prototype.toJS=function(){return new Map(this)},ObservableMap.prototype.toJSON=function(){return this.toPOJO()},ObservableMap.prototype.toString=function(){var _this=this;return this.name+"[{ "+Array.from(this.keys()).map((function(key){return stringifyKey(key)+": "+_this.get(key)})).join(", ")+" }]"},ObservableMap.prototype.observe=function(listener,fireImmediately){return registerListener(this,listener)},ObservableMap.prototype.intercept=function(handler){return registerInterceptor(this,handler)},ObservableMap}(),isObservableMap=createInstanceofPredicate("ObservableMap",ObservableMap),ObservableSetMarker={},ObservableSet=function(){function ObservableSet(initialData,enhancer,name){if(void 0===enhancer&&(enhancer=deepEnhancer),void 0===name&&(name="ObservableSet@"+getNextId()),this.name=name,this[_a$1]=ObservableSetMarker,this._data=new Set,this._atom=createAtom(this.name),this[Symbol.toStringTag]="Set","function"!=typeof Set)throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(newV,oldV){return enhancer(newV,oldV,name)},initialData&&this.replace(initialData)}return ObservableSet.prototype.dehanceValue=function(value){return void 0!==this.dehancer?this.dehancer(value):value},ObservableSet.prototype.clear=function(){var _this=this;transaction((function(){untracked((function(){var e_1,_b;try{for(var _c=__values(_this._data.values()),_d=_c.next();!_d.done;_d=_c.next()){var value=_d.value;_this.delete(value)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_d&&!_d.done&&(_b=_c.return)&&_b.call(_c)}finally{if(e_1)throw e_1.error}}}))}))},ObservableSet.prototype.forEach=function(callbackFn,thisArg){var e_2,_b;try{for(var _c=__values(this),_d=_c.next();!_d.done;_d=_c.next()){var value=_d.value;callbackFn.call(thisArg,value,value,this)}}catch(e_2_1){e_2={error:e_2_1}}finally{try{_d&&!_d.done&&(_b=_c.return)&&_b.call(_c)}finally{if(e_2)throw e_2.error}}},Object.defineProperty(ObservableSet.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),ObservableSet.prototype.add=function(value){var _this=this;if((checkIfStateModificationsAreAllowed(this._atom),hasInterceptors(this))&&!(change=interceptChange(this,{type:"add",object:this,newValue:value})))return this;if(!this.has(value)){transaction((function(){_this._data.add(_this.enhancer(value,void 0)),_this._atom.reportChanged()}));var notify=hasListeners(this),change=notify?{type:"add",object:this,newValue:value}:null;notify&&notifyListeners(this,change)}return this},ObservableSet.prototype.delete=function(value){var _this=this;if(hasInterceptors(this)&&!(change=interceptChange(this,{type:"delete",object:this,oldValue:value})))return!1;if(this.has(value)){var notify=hasListeners(this),change=notify?{type:"delete",object:this,oldValue:value}:null;return transaction((function(){_this._atom.reportChanged(),_this._data.delete(value)})),notify&&notifyListeners(this,change),!0}return!1},ObservableSet.prototype.has=function(value){return this._atom.reportObserved(),this._data.has(this.dehanceValue(value))},ObservableSet.prototype.entries=function(){var nextIndex=0,keys=Array.from(this.keys()),values=Array.from(this.values());return makeIterable({next:function(){var index=nextIndex;return nextIndex+=1,index<values.length?{value:[keys[index],values[index]],done:!1}:{done:!0}}})},ObservableSet.prototype.keys=function(){return this.values()},ObservableSet.prototype.values=function(){this._atom.reportObserved();var self=this,nextIndex=0,observableValues=Array.from(this._data.values());return makeIterable({next:function(){return nextIndex<observableValues.length?{value:self.dehanceValue(observableValues[nextIndex++]),done:!1}:{done:!0}}})},ObservableSet.prototype.replace=function(other){var _this=this;return isObservableSet(other)&&(other=other.toJS()),transaction((function(){Array.isArray(other)||isES6Set(other)?(_this.clear(),other.forEach((function(value){return _this.add(value)}))):null!=other&&fail("Cannot initialize set from "+other)})),this},ObservableSet.prototype.observe=function(listener,fireImmediately){return registerListener(this,listener)},ObservableSet.prototype.intercept=function(handler){return registerInterceptor(this,handler)},ObservableSet.prototype.toJS=function(){return new Set(this)},ObservableSet.prototype.toString=function(){return this.name+"[ "+Array.from(this).join(", ")+" ]"},ObservableSet.prototype[(_a$1=$mobx,Symbol.iterator)]=function(){return this.values()},ObservableSet}(),isObservableSet=createInstanceofPredicate("ObservableSet",ObservableSet),ObservableObjectAdministration=function(){function ObservableObjectAdministration(target,values,name,defaultEnhancer){void 0===values&&(values=new Map),this.target=target,this.values=values,this.name=name,this.defaultEnhancer=defaultEnhancer,this.keysAtom=new Atom(name+".keys")}return ObservableObjectAdministration.prototype.read=function(key){return this.values.get(key).get()},ObservableObjectAdministration.prototype.write=function(key,newValue){var instance=this.target,observable=this.values.get(key);if(observable instanceof ComputedValue)observable.set(newValue);else{if(hasInterceptors(this)){if(!(change=interceptChange(this,{type:"update",object:this.proxy||instance,name:key,newValue:newValue})))return;newValue=change.newValue}if((newValue=observable.prepareNewValue(newValue))!==globalState.UNCHANGED){var notify=hasListeners(this),change=notify?{type:"update",object:this.proxy||instance,oldValue:observable.value,name:key,newValue:newValue}:null;0,observable.setNewValue(newValue),notify&&notifyListeners(this,change)}}},ObservableObjectAdministration.prototype.has=function(key){var map=this.pendingKeys||(this.pendingKeys=new Map),entry=map.get(key);if(entry)return entry.get();var exists=!!this.values.get(key);return entry=new ObservableValue(exists,referenceEnhancer,this.name+"."+stringifyKey(key)+"?",!1),map.set(key,entry),entry.get()},ObservableObjectAdministration.prototype.addObservableProp=function(propName,newValue,enhancer){void 0===enhancer&&(enhancer=this.defaultEnhancer);var target=this.target;if(hasInterceptors(this)){var change=interceptChange(this,{object:this.proxy||target,name:propName,type:"add",newValue:newValue});if(!change)return;newValue=change.newValue}var observable=new ObservableValue(newValue,enhancer,this.name+"."+stringifyKey(propName),!1);this.values.set(propName,observable),newValue=observable.value,Object.defineProperty(target,propName,function(propName){return observablePropertyConfigs[propName]||(observablePropertyConfigs[propName]={configurable:!0,enumerable:!0,get:function(){return this[$mobx].read(propName)},set:function(v){this[$mobx].write(propName,v)}})}(propName)),this.notifyPropertyAddition(propName,newValue)},ObservableObjectAdministration.prototype.addComputedProp=function(propertyOwner,propName,options){var object,prop,descriptor,target=this.target;options.name=options.name||this.name+"."+stringifyKey(propName),this.values.set(propName,new ComputedValue(options)),(propertyOwner===target||(object=propertyOwner,prop=propName,!(descriptor=Object.getOwnPropertyDescriptor(object,prop))||!1!==descriptor.configurable&&!1!==descriptor.writable))&&Object.defineProperty(propertyOwner,propName,function(propName){return computedPropertyConfigs[propName]||(computedPropertyConfigs[propName]={configurable:globalState.computedConfigurable,enumerable:!1,get:function(){return getAdministrationForComputedPropOwner(this).read(propName)},set:function(v){getAdministrationForComputedPropOwner(this).write(propName,v)}})}(propName))},ObservableObjectAdministration.prototype.remove=function(key){if(this.values.has(key)){var target=this.target;if(hasInterceptors(this))if(!(change=interceptChange(this,{object:this.proxy||target,name:key,type:"remove"})))return;try{startBatch();var notify=hasListeners(this),oldObservable=this.values.get(key),oldValue=oldObservable&&oldObservable.get();if(oldObservable&&oldObservable.set(void 0),this.keysAtom.reportChanged(),this.values.delete(key),this.pendingKeys){var entry=this.pendingKeys.get(key);entry&&entry.set(!1)}delete this.target[key];var change=notify?{type:"remove",object:this.proxy||target,oldValue:oldValue,name:key}:null;0,notify&&notifyListeners(this,change)}finally{endBatch()}}},ObservableObjectAdministration.prototype.illegalAccess=function(owner,propName){console.warn("Property '"+propName+"' of '"+owner+"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner")},ObservableObjectAdministration.prototype.observe=function(callback,fireImmediately){return registerListener(this,callback)},ObservableObjectAdministration.prototype.intercept=function(handler){return registerInterceptor(this,handler)},ObservableObjectAdministration.prototype.notifyPropertyAddition=function(key,newValue){var notify=hasListeners(this),change=notify?{type:"add",object:this.proxy||this.target,name:key,newValue:newValue}:null;if(notify&&notifyListeners(this,change),this.pendingKeys){var entry=this.pendingKeys.get(key);entry&&entry.set(!0)}this.keysAtom.reportChanged()},ObservableObjectAdministration.prototype.getKeys=function(){var e_1,_a;this.keysAtom.reportObserved();var res=[];try{for(var _b=__values(this.values),_c=_b.next();!_c.done;_c=_b.next()){var _d=__read(_c.value,2),key=_d[0];_d[1]instanceof ObservableValue&&res.push(key)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}return res},ObservableObjectAdministration}();function asObservableObject(target,name,defaultEnhancer){if(void 0===name&&(name=""),void 0===defaultEnhancer&&(defaultEnhancer=deepEnhancer),Object.prototype.hasOwnProperty.call(target,$mobx))return target[$mobx];isPlainObject(target)||(name=(target.constructor.name||"ObservableObject")+"@"+getNextId()),name||(name="ObservableObject@"+getNextId());var adm=new ObservableObjectAdministration(target,new Map,stringifyKey(name),defaultEnhancer);return addHiddenProp(target,$mobx,adm),adm}var observablePropertyConfigs=Object.create(null),computedPropertyConfigs=Object.create(null);function getAdministrationForComputedPropOwner(owner){var adm=owner[$mobx];return adm||(initializeInstance(owner),owner[$mobx])}var isObservableObjectAdministration=createInstanceofPredicate("ObservableObjectAdministration",ObservableObjectAdministration);function isObservableObject(thing){return!!isObject(thing)&&(initializeInstance(thing),isObservableObjectAdministration(thing[$mobx]))}function getAtom(thing,property){if("object"==typeof thing&&null!==thing){if(isObservableArray(thing))return void 0!==property&&fail(!1),thing[$mobx].atom;if(isObservableSet(thing))return thing[$mobx];if(isObservableMap(thing)){var anyThing=thing;return void 0===property?anyThing._keysAtom:((observable=anyThing._data.get(property)||anyThing._hasMap.get(property))||fail(!1),observable)}var observable;if(initializeInstance(thing),property&&!thing[$mobx]&&thing[property],isObservableObject(thing))return property?((observable=thing[$mobx].values.get(property))||fail(!1),observable):fail(!1);if(isAtom(thing)||isComputedValue(thing)||isReaction(thing))return thing}else if("function"==typeof thing&&isReaction(thing[$mobx]))return thing[$mobx];return fail(!1)}var toString=Object.prototype.toString;function deepEqual(a,b,depth){return void 0===depth&&(depth=-1),function eq(a,b,depth,aStack,bStack){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return!1;if(a!=a)return b!=b;var type=typeof a;if("function"!==type&&"object"!==type&&"object"!=typeof b)return!1;var className=toString.call(a);if(className!==toString.call(b))return!1;switch(className){case"[object RegExp]":case"[object String]":return""+a==""+b;case"[object Number]":return+a!=+a?+b!=+b:0==+a?1/+a==1/b:+a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(a)===Symbol.valueOf.call(b);case"[object Map]":case"[object Set]":depth>=0&&depth++}a=unwrap(a),b=unwrap(b);var areArrays="[object Array]"===className;if(!areArrays){if("object"!=typeof a||"object"!=typeof b)return!1;var aCtor=a.constructor,bCtor=b.constructor;if(aCtor!==bCtor&&!("function"==typeof aCtor&&aCtor instanceof aCtor&&"function"==typeof bCtor&&bCtor instanceof bCtor)&&"constructor"in a&&"constructor"in b)return!1}if(0===depth)return!1;depth<0&&(depth=-1);bStack=bStack||[];var length=(aStack=aStack||[]).length;for(;length--;)if(aStack[length]===a)return bStack[length]===b;if(aStack.push(a),bStack.push(b),areArrays){if((length=a.length)!==b.length)return!1;for(;length--;)if(!eq(a[length],b[length],depth-1,aStack,bStack))return!1}else{var keys=Object.keys(a),key=void 0;if(length=keys.length,Object.keys(b).length!==length)return!1;for(;length--;)if(key=keys[length],!has$1(b,key)||!eq(a[key],b[key],depth-1,aStack,bStack))return!1}return aStack.pop(),bStack.pop(),!0}(a,b,depth)}function unwrap(a){return isObservableArray(a)?a.slice():isES6Map(a)||isObservableMap(a)||isES6Set(a)||isObservableSet(a)?Array.from(a.entries()):a}function has$1(a,key){return Object.prototype.hasOwnProperty.call(a,key)}function makeIterable(iterator){return iterator[Symbol.iterator]=getSelf,iterator}function getSelf(){return this}if("undefined"==typeof Proxy||"undefined"==typeof Symbol)throw new Error("[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Symbol or Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.");"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:function(listener){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}},extras:{getDebugName:function(thing,property){return(void 0!==property?getAtom(thing,property):isObservableObject(thing)||isObservableMap(thing)||isObservableSet(thing)?function getAdministration(thing,property){return thing||fail("Expecting some object"),void 0!==property?getAdministration(getAtom(thing,property)):isAtom(thing)||isComputedValue(thing)||isReaction(thing)||isObservableMap(thing)||isObservableSet(thing)?thing:(initializeInstance(thing),thing[$mobx]?thing[$mobx]:void fail(!1))}(thing):getAtom(thing)).name}},$mobx:$mobx});const subscriptions=new Map;function subscribe(subscription){const id=newId();return subscriptions.set(id,subscription),{unsubscribe:()=>subscriptions.delete(id)}}async function publish(...messages){const subsArray=Array.from(subscriptions.values()),receivers=[];for(const message of messages)if("topic"in message)receivers.push(...subsArray.filter(s=>"topic"in s&&s.topic===message.topic));else if("entity"in message){const entities=[message.entity].concat(mx.meta.getEntity(message.entity).getSuperEntities());receivers.push(...subsArray.filter(s=>"entity"in s&&entities.includes(s.entity)))}else"attr"in message?receivers.push(...subsArray.filter(s=>"attr"in s&&s.attr===message.attr&&s.guid===message.guid)):receivers.push(...subsArray.filter(s=>"guid"in s&&!("attr"in s)&&s.guid===message.guid));const updates=runInAction(()=>receivers.map(s=>void 0!==s.callback?s.callback():void 0));await Promise.all(updates)}function getTags(guid){return Array.from(subscriptions.values()).filter(s=>"guid"in s&&s.guid===guid).map(s=>s.tag).filter(t=>t)}function getSubscribedGuids(){return Array.from(subscriptions.values()).filter(s=>"guid"in s).map(s=>s.guid)}const mobxComputed=Symbol("mobxComputed");function fromMxSubscription$(name,subscription){let handle;const atom=createAtom(name,()=>{handle=subscribe(Object.assign(Object.assign({tag:name},subscription),{callback:()=>atom.reportChanged()}))},()=>{ensure(handle).unsubscribe(),handle=void 0});return asDependable(name,()=>atom.reportObserved())}function fromTimer$(name,time){let handle;const atom=createAtom(name,()=>{handle=setInterval(()=>atom.reportChanged(),time)},()=>{clearInterval(ensure(handle)),handle=void 0});return asDependable(name,()=>atom.reportObserved())}function fromConstant$(value){return asDependable("Constant value "+value,()=>value)}function fromRequest$(name,factory){const factoryComputation=computed(()=>(assertInObservingContext(),factory()),{name:name});let lastRequest,lastRequestResult;return fromComputation$("Handle response of "+lowerCaseFirst(name),()=>{const thisRequest=factoryComputation.get();if("status"in thisRequest)return lastRequest=void 0,lastRequestResult=void 0,thisRequest;if(thisRequest===lastRequest)return ensure(lastRequestResult).get();const loadingState=Array.isArray(thisRequest)?thisRequest[0]:loading(),requestResult=observable.box(loadingState,{deep:!1});return(Array.isArray(thisRequest)?thisRequest[1]:thisRequest).then(action(r=>requestResult.set(r)),action(err=>{mx.onError(err),requestResult.set(unavailable())})),lastRequest=thisRequest,lastRequestResult=requestResult,lastRequestResult.get()})}function fromComputation$(name,getValue){const computation=computed(getValue,{name:name});return asDependable(name,()=>computation.get(),computation)}function useValue(name,initialValue){const box=observable.box(initialValue);return[asDependable(name,()=>box.get()),value=>box.set(value)]}function getPreviousValue$(value$){let lastSeenValue;return asDependable("Previous value of "+lowerCaseFirst(value$.name),()=>{const toReturn=lastSeenValue;return lastSeenValue=value$.dependOn(),toReturn})}function fromMutableComputation$(name,getValue){const underlyingComputed=computed(getValue,{name:name});return Object.assign(Object.assign({},asDependable(name,()=>underlyingComputed.get(),underlyingComputed)),{muted:function(actionToExecute){if(underlyingComputed.dependenciesState!==IDerivationState.UP_TO_DATE)actionToExecute();else{const originalGet=underlyingComputed.get.bind(underlyingComputed);underlyingComputed.onBecomeStale=()=>{underlyingComputed.get=()=>{underlyingComputed.dependenciesState=IDerivationState.STALE;try{return originalGet()}finally{underlyingComputed.dependenciesState=IDerivationState.UP_TO_DATE,delete underlyingComputed.get}},scheduleSideEffect(()=>underlyingComputed.observing.forEach(o=>{o.get&&o.get(),o.lowestObserverState=IDerivationState.UP_TO_DATE}))};try{actionToExecute()}finally{delete underlyingComputed.onBecomeStale,underlyingComputed.dependenciesState=IDerivationState.UP_TO_DATE}}}})}function withSideEffect$(name,value$,onChange,onBecomeUnused,onBecomeUsed){assertNotInObservingContext();const computation=computed(()=>value$.dependOn(),{name:"Computation for "+lowerCaseFirst(name)});let disposer;const atom=createAtom(name,()=>{onBecomeUsed&&runInAction(onBecomeUsed),onChange&&(disposer=computation.observe(action(({newValue:newValue,oldValue:oldValue})=>onChange(newValue,oldValue)),!0))},()=>{disposer&&disposer(),onBecomeUnused&&runInAction(onBecomeUnused)});return asDependable(name,()=>(atom.reportObserved(),computation.get()),computation)}function dependOnSubscription(subscription){assertInObservingContext();const currentDerivation=getGlobalState().trackingDerivation;if(!currentDerivation)throw new AssertionError;const subscriptionAtoms=currentDerivation.__subscriptionAtoms||(currentDerivation.__subscriptionAtoms=[]),subscriptionKey=JSON.stringify(subscription);let subscriptionAtom=subscriptionAtoms.find(a=>a.name===subscriptionKey);if(!subscriptionAtom){let handle;const atom=createAtom(subscriptionKey,()=>{handle=subscribe(Object.assign(Object.assign({},subscription),{callback:()=>atom.reportChanged()}))},()=>{ensure(handle).unsubscribe(),handle=void 0});subscriptionAtoms.push(atom),subscriptionAtom=atom}subscriptionAtom.reportObserved()}function useDependency(name,onBecomeUnused){const atom=createAtom(name,void 0,onBecomeUnused);return tuple(asDependable(name,()=>atom.reportObserved()),()=>atom.reportChanged())}function readUntracked(value$){const previousAllowUntracked=allowUntracked;allowUntracked=!0;try{const computation=value$[mobxComputed];return computation&&computation.dependenciesState!==IDerivationState.NOT_TRACKING?computation.value:untracked(()=>value$.dependOn())}finally{allowUntracked=previousAllowUntracked}}function scheduleSideEffect(actionToExecute){new Reaction("Run side effect "+actionToExecute.name,actionToExecute).schedule()}function asDependable(name,dependOn,computedValue){return assertNotInObservingContext(),Object.assign({name:name,dependOn:()=>(assertInObservingContext(),dependOn())},computedValue?{[mobxComputed]:computedValue}:{})}function assertNotInObservingContext(){if(isInObservingContext())throw new AssertionError}let allowUntracked=!1;function assertInObservingContext(){if(!isInObservingContext()&&!allowUntracked)throw new AssertionError}function isInObservingContext(){return null!=getGlobalState().trackingDerivation}function subscriptionDependency(name,subscription){let handle;const atom=createAtom(name,()=>{handle=subscribe(Object.assign(Object.assign({tag:name},subscription),{callback:()=>atom.reportChanged()}))},()=>{ensure(handle).unsubscribe(),handle=void 0});return{reportObserved(){atom.reportObserved()}}}function loadableResource(name,factory,initialValue=loading()){const atom=createAtom(name,fetchResource);let value;function fetchResource(){const result=factory();result instanceof Promise?(value=initialValue,result.then(finalValue=>{value=finalValue,atom.reportChanged()},e=>mx.onError(e))):value=result}return computed(()=>(atom.reportObserved()||fetchResource(),value))}function using(resourcesFactory,func$){let resourceDisposers;const atom=createAtom("Resources tracker",()=>{resourceDisposers=resourcesFactory()},()=>resourceDisposers.forEach(r=>r()));return computed(()=>{const result=func$();return atom.reportObserved(),result})}function valueMonitor(expression,options){var _a;let lastSeenValue,firstRun=!0;const computedValue=computed(expression,options),compareFn=null!==(_a=null==options?void 0:options.equals)&&void 0!==_a?_a:comparer.default;return{runIfChanged(effect){const newValue=computedValue.get();!firstRun&&compareFn(lastSeenValue,newValue)||(firstRun=!1,lastSeenValue=newValue,runActionInComputed(()=>effect(newValue)))}}}function runActionInComputed(action){!function(func){var res,prev=globalState.computationDepth;globalState.computationDepth=0;try{res=func()}finally{globalState.computationDepth=prev}}(()=>runInAction(action))}configure({enforceActions:"always"});const scheduledActions=[];function scheduleAction(action){scheduledActions.push(action),1===scheduledActions.length&&setTimeout(()=>runInAction(()=>scheduledActions.splice(0).forEach(f=>f())),0)}const LOADING={status:"loading"};function loading(){return LOADING}const UNAVAILABLE={status:"unavailable"};function unavailable(){return UNAVAILABLE}function available(value){return{status:"available",value:value}}function getOrElseL(value,def){return"available"===value.status?value.value:def}function getOrCrashL(value){return"available"===value.status?value.value:crash()}function liftL(action){return loadable=>mapL(loadable,action)}function mapL(loadable,action){return flatMapL(loadable,v=>available(action(v)))}function flatMapL(loadable,action){return"available"===loadable.status?action(loadable.value):loadable}function flattenArrayL(array){return array.reduce((acc,el)=>acc.concat("available"===el.status?[el.value]:[]),[])}function asDynamicValue(func$){return asReloadable(()=>fromLoadable(func$()),v=>({value:v.value}))}function asDynamicValue$(value$){return asReloadable$(fromComputation$("Dynamic "+lowerCaseFirst(value$.name),()=>fromLoadable(value$.dependOn())))}function asReloadable(func$,rememberFunc){const value=observable.box(void 0,{deep:!1}),funcMonitor=valueMonitor(func$);let timeoutHandle,lastSeenValue={};return using(()=>[()=>runInAction(()=>value.set(void 0)),()=>window.clearTimeout(timeoutHandle)],()=>(funcMonitor.runIfChanged(newValue=>{switch(window.clearTimeout(timeoutHandle),newValue.status){case"loading":void 0===value.get()?value.set(newValue):timeoutHandle=window.setTimeout(()=>runInAction(()=>{value.set(Object.assign(Object.assign({},newValue),lastSeenValue))}),100);break;case"unavailable":lastSeenValue={},value.set(newValue);break;case"available":lastSeenValue=rememberFunc(newValue),value.set(newValue)}}),ensure(value.get())))}function asReloadable$(value$,rememberFunc){let lastSeenValue,timeoutHandle;const[debounceElapsed$,elapseDebounce]=useDependency("Reloadable monitor of "+lowerCaseFirst(value$.name));return fromComputation$("Reloadable "+lowerCaseFirst(value$.name),()=>{debounceElapsed$.dependOn();const newValue=value$.dependOn();switch(window.clearTimeout(timeoutHandle),newValue.status){case"available":return lastSeenValue=newValue,newValue;case"unavailable":return lastSeenValue=void 0,newValue;case"loading":return timeoutHandle=window.setTimeout(()=>{lastSeenValue=newValue,runInAction(elapseDebounce)},100),void 0!==lastSeenValue?lastSeenValue:newValue}})}export{loadableResource as A,useValue as B,readUntracked as C,getOrCrashL as D,useDependency as E,reaction as F,scheduleAction as G,asDynamicValue as H,valueMonitor as I,asReloadable as J,fromRequest$ as K,asReloadable$ as L,fromMutableComputation$ as M,asDynamicValue$ as N,withSideEffect$ as O,fromMxSubscription$ as P,fromTimer$ as Q,getPreviousValue$ as R,scheduleSideEffect as S,liftL as T,autorun as a,action as b,computed as c,getTags as d,comparer as e,available as f,getSubscribedGuids as g,getOrElseL as h,isComputed as i,configure as j,fromComputation$ as k,dependOnSubscription as l,loading as m,subscriptionDependency as n,observable as o,publish as p,createAtom as q,runActionInComputed as r,subscribe as s,runInAction as t,unavailable as u,fromConstant$ as v,mapL as w,flatMapL as x,using as y,flattenArrayL as z};
