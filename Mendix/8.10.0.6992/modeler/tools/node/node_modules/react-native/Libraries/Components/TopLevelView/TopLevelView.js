/**
 * @flow strict-local
 */

'use strict';

const React = require('react');
const createReactClass = require('create-react-class');
const ReactNative = require('../../Renderer/shims/ReactNative');
const View = require('../View/View');
const TextInput = require('../TextInput/TextInput');
const TextInputEventEmitter = require('../TextInput/TextInputEventEmitter');

import type {ViewProps} from '../View/ViewPropTypes';

const TopLevelView = createReactClass({
    displayName: 'TopLevelView',
    render: function() {
      return (
        <View
          onStartShouldSetResponderCapture={e => {
            if (TextInput.State.currentlyFocusedField() !== e.target) {
              TextInputEventEmitter.emit('tapOutside');
            }
            return false;
          }}
          {...this.props}
        >
          {this.props.children}
        </View>
      );
    }
});

class InternalTopLevelView extends ReactNative.NativeComponent<ViewProps> {}

const TypedTopLevelView = ((TopLevelView: any): Class<InternalTopLevelView>);

module.exports = TypedTopLevelView;
