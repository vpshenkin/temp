<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.3) on Mon May 25 17:22:45 CEST 2020 -->
<title>DataStorage</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2020-05-25">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
<script type="text/javascript" src="../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../jquery/jquery-3.3.1.js"></script>
<script type="text/javascript" src="../../../jquery/jquery-migrate-3.0.1.js"></script>
<script type="text/javascript" src="../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="DataStorage";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":6,"i1":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">com.mendix.datastorage</a></div>
<h2 title="Interface DataStorage" class="title">Interface DataStorage</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<pre>public interface <span class="typeNameLabel">DataStorage</span></pre>
<div class="block">Provides data storage related methods.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>Mendix 7</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>&lt;R&gt;&nbsp;R</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#executeWithConnection(com.mendix.systemwideinterfaces.core.IContext,java.util.function.Function)">executeWithConnection</a></span>&#8203;(<a href="../systemwideinterfaces/core/IContext.html" title="interface in com.mendix.systemwideinterfaces.core">IContext</a>&nbsp;context,
                     java.util.function.Function&lt;java.sql.Connection,&#8203;R&gt;&nbsp;function)</code></th>
<td class="colLast">
<div class="block">The only difference is that this method executes the function on the current connection of the given context, allowing function
 execution to be part of the current transaction.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>&lt;R&gt;&nbsp;R</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#executeWithConnection(java.util.function.Function)">executeWithConnection</a></span>&#8203;(java.util.function.Function&lt;java.sql.Connection,&#8203;R&gt;&nbsp;function)</code></th>
<td class="colLast">
<div class="block">Executes the given function and returns its result.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="executeWithConnection(java.util.function.Function)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>executeWithConnection</h4>
<pre class="methodSignature">&lt;R&gt;&nbsp;R&nbsp;executeWithConnection&#8203;(java.util.function.Function&lt;java.sql.Connection,&#8203;R&gt;&nbsp;function)</pre>
<div class="block">Executes the given function and returns its result. When the function is executed, an open database connection will automatically be
 given as its first argument. This connection will be automatically closed afterwards.

 <p>The function being passed must not throw checked exceptions. If you want to throw an exception, for example to rollback a microflow
 action, you must throw an unchecked exception, like a <code>java.lang.RuntimeException</code>.

 <p>Note that this method is only provided for convenience, for example to enable execution of database-specific SQL SELECT statements,
 or calling stored procedures created in the same database (schema), with a direct connection to the Mendix database.

 <p>DISCLAIMER

 <p>ANY USAGE OF THIS METHOD ON THE MENDIX DATABASE WITH DATA MUTATING SQL STATEMENTS LIKE (BUT NOT LIMITED TO) DELETE AND UPDATE, OR
 SCHEMA MUTATING SQL STATEMENTS LIKE (BUT NOT LIMITED TO) DROP AND ALTER, IS ENTIRELY AT YOUR OWN RISK. MENDIX CANNOT GUARANTEE THE
 CONSISTENCY OF THE MENDIX DATABASE DATA OR SCHEMA UNDER SUCH USAGE.

 <p>One should be especially careful with the Mendix administration tables in the MENDIXSYSTEM$ and SYSTEM$ module namespaces. Please
 be aware that the existence of Mendix administration tables, and the naming conventions in the database, are a Mendix-internal
 implementation detail, and are potentially subject to change between different Mendix versions.

 <p>To avoid tight coupling between your queries and database-specific names, please use Mendix Core API methods with Mendix Core Meta
 classes to retrieve database-specific table and column names:
 <ul>
 <li><a href="../core/Core.html#getDatabaseTableName(com.mendix.systemwideinterfaces.core.meta.IMetaObject)"><code>Core.getDatabaseTableName(IMetaObject)</code></a></li>
 <li><a href="../core/Core.html#getDatabaseTableName(com.mendix.systemwideinterfaces.core.meta.IMetaAssociation)"><code>Core.getDatabaseTableName(IMetaAssociation)</code></a></li>
 <li><a href="../core/Core.html#getDatabaseColumnName(com.mendix.systemwideinterfaces.core.meta.IMetaPrimitive)"><code>Core.getDatabaseColumnName(IMetaPrimitive)</code></a></li>
 <li><a href="../core/Core.html#getDatabaseChildColumnName(com.mendix.systemwideinterfaces.core.meta.IMetaAssociation)"><code>Core.getDatabaseChildColumnName(IMetaAssociation)</code></a></li>
 <li><a href="../core/Core.html#getDatabaseParentColumnName(com.mendix.systemwideinterfaces.core.meta.IMetaAssociation)"><code>Core.getDatabaseParentColumnName(IMetaAssociation)</code></a></li>
 </ul>

 <p>References to table and column names from within stored procedures in the database might become invalid after a change
 in the Mendix domain model has been synchronized with the database.

 <p>Furthermore, executing the SQL INSERT statement on tables in the Mendix database should be avoided. Mendix creates a special unique
 ID for each data row in the table, where its Long data type actually has a specialized Mendix-internal representation. Inserting
 one's own data row in a table with a custom ID might lead to unspecified or undesired external behavior, like not being able to
 retrieve such data rows in a data grid.

 <p>Please be advised that the automated backup of the Mendix cloud database (PostgreSQL) is only done for the PUBLIC schema. By
 using this method, any (meta)data that is stored in another schema might potentially be lost on hardware failure.

 <p><b>Code examples</b>

 <p><u>Basic examples</u>

 <p>Example without parameters:
 <pre> <code>
 private Report generate(Connection connection) {
     Report report = new Report();

     try (Statement statement = connection.createStatement()) {
         ...
         report.addRow(..);
     } catch (SQLException e) {
         // handle exception
     }

     return report;
 }

 public Report generateReport() {
     return Core.dataStorage().executeWithConnection(this::generate);
 }
 </code></pre>
 The above example first defines a generate method at the top, which returns a report. It takes a connection as its first
 parameter, which is automatically set from the data storage API. This method is then passed as
 <a href="https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html">a method reference</a> to the
 executeWithConnection API method at the bottom.
 The first function uses the <a href=https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html>
 try-with-resources</a> functionality, which automatically closes the given resource.

 <p>Example with parameters:
 <pre> <code>
 private Function&lt;Connection, Report&gt; createReportOnConnection(String name, LocalDate start, LocalDate end) {
     return connection -&gt; {
         Report report = new Report();

         try (Statement statement = connection.createStatement();
              ResultSet resultSet = statement.executeQuery(query)) {
             // do something with the result set and fill the report
         } catch (SQLException e) {
             // handle exception
         }

         return report;
     };
 }

 public Report createReport(String name, LocalDate start, LocalDate end) {
     return Core.dataStorage().executeWithConnection(createReportOnConnection(name, start, end));
 }
 </code></pre>
 The above example first defines a create method at the top, which has three method-specific parameters. This method returns a function
 which receives that a connection and returns a report.
 This method is then called as the argument of the executeWithConnection API method at the bottom.

 <p><u>Examples with checked exceptions</u>

 <p>In this example, the exception is caught and wrapped in a <code>java.lang.RuntimeException</code>:
 <pre> <code>
 private Report generate(Connection connection) {
     Report report = new Report();

     try (Statement statement = connection.createStatement()) {
         ...
         report.addRow(..);
     } catch (SQLException e) {
         throw new RuntimeException(e);
     }

     return report;
 }

 public Report generateReport() {
     return Core.dataStorage().executeWithConnection(this::generate);
 }
 </code></pre>

 <p>In this example, we make use of the <a href="https://github.com/diffplug/durian">Durian library</a>, to wrap checked exceptions
 more easily:
 <pre> <code>
 private Report generate(Connection connection) throws Exception {
     Report report = new Report();

     try (Statement statement = connection.createStatement()) {
         ...
         report.addRow(..);
     }
     // do not handle the exception here

     return report;
 }

 public Report generateReport() {
     return Core.dataStorage().executeWithConnection(Errors.rethrow().wrap(this::generate));
 }
 </code></pre>
 In that library, there are a lot more handy methods to handle exceptions in a more functional way, for example by using <code>Either</code>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>function</code> - the function to execute with a database connection as argument</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the result of the given function.</dd>
</dl>
</li>
</ul>
<a id="executeWithConnection(com.mendix.systemwideinterfaces.core.IContext,java.util.function.Function)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>executeWithConnection</h4>
<pre class="methodSignature">&lt;R&gt;&nbsp;R&nbsp;executeWithConnection&#8203;(<a href="../systemwideinterfaces/core/IContext.html" title="interface in com.mendix.systemwideinterfaces.core">IContext</a>&nbsp;context,
                            java.util.function.Function&lt;java.sql.Connection,&#8203;R&gt;&nbsp;function)</pre>
<div class="block">The only difference is that this method executes the function on the current connection of the given context, allowing function
 execution to be part of the current transaction.
 This connection will not be automatically closed afterwards.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>context</code> - the context to execute this function on</dd>
<dd><code>function</code> - the function to execute with a database connection as argument</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the result of the given function</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>7.6</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#executeWithConnection(java.util.function.Function)"><code>executeWithConnection(Function)</code></a></dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</body>
</html>
